# Pre-Release Check Skill - ä¸Šæ¶å‰è‡ªåŠ¨æ£€æŸ¥

## ç›®çš„
åœ¨åº”ç”¨æäº¤åˆ° App Store æˆ– Google Play ä¹‹å‰ï¼Œè‡ªåŠ¨æ£€æŸ¥æ‰€æœ‰å¸¸è§é—®é¢˜ï¼Œé¿å…è¢«æ‹’ç»æˆ–å‡ºç°ä½çº§é”™è¯¯ã€‚

## ä½¿ç”¨æ—¶æœº
- å‡†å¤‡æ„å»ºç”Ÿäº§ç‰ˆæœ¬å‰
- æ¯æ¬¡ç‰ˆæœ¬æ›´æ–°å‰
- æäº¤å•†åº—å®¡æ ¸å‰

## æ£€æŸ¥æ¸…å•

### ç¬¬ä¸€éƒ¨åˆ†ï¼šä»£ç æ¸…ç†

#### 1. æ£€æŸ¥ console.log
æ‰«ææ‰€æœ‰æºä»£ç æ–‡ä»¶ï¼ŒæŸ¥æ‰¾ console.log/console.warn/console.error

**æ£€æŸ¥å‘½ä»¤ï¼š**
```bash
grep -r "console\\.log\|console\\.warn\|console\\.error" app/ components/ lib/ store/ --include="*.ts" --include="*.tsx"
```

**æ ‡å‡†ï¼š**
- âš ï¸ å‘ç° console.log â†’ éœ€è¦ç§»é™¤æˆ–ä½¿ç”¨æ¡ä»¶ç¼–è¯‘
- âœ… æ—  console è¾“å‡º â†’ é€šè¿‡

#### 2. æ£€æŸ¥ TODO/FIXME æ³¨é‡Š
æŸ¥æ‰¾æœªå®Œæˆçš„ä»»åŠ¡æ ‡è®°

**æ£€æŸ¥å‘½ä»¤ï¼š**
```bash
grep -r "TODO\|FIXME\|HACK\|XXX" app/ components/ lib/ store/ --include="*.ts" --include="*.tsx"
```

**æ ‡å‡†ï¼š**
- âš ï¸ å‘ç°æœªå®Œæˆçš„ TODO â†’ ç¡®è®¤æ˜¯å¦å½±å“åŠŸèƒ½
- âœ… æ— å…³é”® TODO â†’ é€šè¿‡

#### 3. æ£€æŸ¥è°ƒè¯•ä»£ç 
æŸ¥æ‰¾å¯èƒ½çš„è°ƒè¯•ä»£ç 

**æ£€æŸ¥å†…å®¹ï¼š**
- `debugger` è¯­å¥
- `alert()` è°ƒç”¨ï¼ˆç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨ Alert ç»„ä»¶ï¼‰
- æµ‹è¯•ç”¨çš„å‡æ•°æ®

---

### ç¬¬äºŒéƒ¨åˆ†ï¼šé…ç½®éªŒè¯

#### 4. æ£€æŸ¥ app.json é…ç½®
éªŒè¯åº”ç”¨é…ç½®æ˜¯å¦å®Œæ•´

**å¿…éœ€å­—æ®µï¼š**
```json
{
  "expo": {
    "name": "åº”ç”¨åç§°",
    "slug": "åº”ç”¨æ ‡è¯†",
    "version": "ç‰ˆæœ¬å·ï¼ˆå¦‚ 1.0.0ï¼‰",
    "icon": "./assets/images/icon.png",
    "splash": {
      "image": "./assets/images/splash-icon.png"
    },
    "ios": {
      "bundleIdentifier": "com.xxx.xxx",
      "supportsTablet": true
    },
    "android": {
      "package": "com.xxx.xxx",
      "adaptiveIcon": {
        "foregroundImage": "./assets/images/android-icon-foreground.png",
        "backgroundColor": "#é¢œè‰²"
      }
    }
  }
}
```

**æ£€æŸ¥å‘½ä»¤ï¼š**
```bash
cat app.json | jq '.expo | {name, version, icon}'
```

**æ ‡å‡†ï¼š**
- âœ… æ‰€æœ‰å¿…éœ€å­—æ®µå­˜åœ¨
- âœ… ç‰ˆæœ¬å·æ ¼å¼æ­£ç¡®ï¼ˆx.y.zï¼‰
- âœ… Bundle ID å’Œ Package æ ¼å¼æ­£ç¡®

#### 5. æ£€æŸ¥ eas.json é…ç½®
éªŒè¯ EAS Build é…ç½®

**æ£€æŸ¥å†…å®¹ï¼š**
- production profile å­˜åœ¨
- autoIncrement é…ç½®ï¼ˆå¯é€‰ï¼‰
- submit é…ç½®å­˜åœ¨

**æ£€æŸ¥å‘½ä»¤ï¼š**
```bash
cat eas.json
```

#### 6. éªŒè¯å›¾æ ‡å’Œå¯åŠ¨é¡µ
æ£€æŸ¥èµ„æºæ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”å°ºå¯¸æ­£ç¡®

**æ£€æŸ¥å‘½ä»¤ï¼š**
```bash
ls -lh assets/images/icon.png
ls -lh assets/images/splash-icon.png
ls -lh assets/images/android-icon-*.png
```

**æ ‡å‡†ï¼š**
- âœ… icon.png å­˜åœ¨ä¸” â‰¥ 1024x1024
- âœ… Android è‡ªé€‚åº”å›¾æ ‡å®Œæ•´ï¼ˆforeground/backgroundï¼‰
- âœ… æ–‡ä»¶å¤§å°åˆç†ï¼ˆ< 500KBï¼‰

---

### ç¬¬ä¸‰éƒ¨åˆ†ï¼šéšç§åˆè§„

#### 7. æ£€æŸ¥éšç§æ”¿ç­–
éªŒè¯éšç§æ”¿ç­–æ˜¯å¦å®Œæ•´

**æ£€æŸ¥å†…å®¹ï¼š**
- [ ] éšç§æ”¿ç­–é¡µé¢å­˜åœ¨ï¼ˆapp/privacy.tsxï¼‰
- [ ] è®¾ç½®é¡µé¢æœ‰éšç§æ”¿ç­–é“¾æ¥
- [ ] éšç§æ”¿ç­– URL å‡†å¤‡å¥½ï¼ˆå•†åº—éœ€è¦ï¼‰

**æ£€æŸ¥å‘½ä»¤ï¼š**
```bash
# æ£€æŸ¥éšç§æ”¿ç­–æ–‡ä»¶
ls -la app/privacy.tsx

# æ£€æŸ¥è®¾ç½®é¡µé¢æ˜¯å¦æœ‰é“¾æ¥
grep -n "privacy\|éšç§" app/(tabs)/explore.tsx
```

**æ ‡å‡†ï¼š**
- âœ… éšç§æ”¿ç­–å®Œæ•´
- âœ… è¯´æ˜æ•°æ®æ”¶é›†æƒ…å†µï¼ˆæœ¬åœ°å­˜å‚¨ï¼‰
- âœ… åŒ…å«å¥åº·å…è´£å£°æ˜

#### 8. æ£€æŸ¥æƒé™å£°æ˜
éªŒè¯è¯·æ±‚çš„æƒé™æ˜¯å¦æœ€å°åŒ–

**æ£€æŸ¥ app.json ä¸­çš„æƒé™ï¼š**
```bash
cat app.json | grep -i permission
```

**æ ‡å‡†ï¼š**
- âœ… åªè¯·æ±‚å¿…è¦æƒé™ï¼ˆé€šçŸ¥ï¼‰
- âŒ ä¸è¦æœ‰ä¸å¿…è¦çš„æƒé™ï¼ˆä½ç½®ã€ç›¸æœºã€é€šè®¯å½•ç­‰ï¼‰

---

### ç¬¬å››éƒ¨åˆ†ï¼šæ€§èƒ½å’Œè´¨é‡

#### 9. æ£€æŸ¥åŒ…ä¾èµ–
æŸ¥æ‰¾æœªä½¿ç”¨çš„ä¾èµ–

**æ£€æŸ¥å‘½ä»¤ï¼š**
```bash
npx depcheck
```

**æ ‡å‡†ï¼š**
- âš ï¸ æœ‰æœªä½¿ç”¨çš„ä¾èµ– â†’ è€ƒè™‘ç§»é™¤
- âœ… ä¾èµ–åˆç† â†’ é€šè¿‡

#### 10. æ£€æŸ¥å®‰å…¨æ¼æ´
æ‰«æä¾èµ–çš„å®‰å…¨é—®é¢˜

**æ£€æŸ¥å‘½ä»¤ï¼š**
```bash
npm audit
```

**æ ‡å‡†ï¼š**
- âœ… 0 vulnerabilities â†’ é€šè¿‡
- âš ï¸ æœ‰é«˜å±æ¼æ´ â†’ å¿…é¡»ä¿®å¤

#### 11. éªŒè¯ TypeScript ç¼–è¯‘
ç¡®ä¿æ²¡æœ‰ç±»å‹é”™è¯¯

**æ£€æŸ¥å‘½ä»¤ï¼š**
```bash
npx tsc --noEmit
```

**æ ‡å‡†ï¼š**
- âœ… æ— é”™è¯¯ â†’ é€šè¿‡
- âŒ æœ‰é”™è¯¯ â†’ å¿…é¡»ä¿®å¤

---

### ç¬¬äº”éƒ¨åˆ†ï¼šåŠŸèƒ½å®Œæ•´æ€§

#### 12. æ ¸å¿ƒåŠŸèƒ½è‡ªæµ‹
æ‰‹åŠ¨éªŒè¯æ ¸å¿ƒåŠŸèƒ½

**æµ‹è¯•é¡¹ï¼š**
- [ ] æ·»åŠ é¥®æ°´è®°å½•
- [ ] åˆ é™¤è®°å½•
- [ ] ä¿®æ”¹æ¯æ—¥ç›®æ ‡
- [ ] å¼€å¯/å…³é—­æé†’
- [ ] ä¿®æ”¹æé†’æ—¶é—´
- [ ] æµ‹è¯•é€šçŸ¥
- [ ] æ·±è‰²/æµ…è‰²æ¨¡å¼åˆ‡æ¢
- [ ] æ•°æ®æŒä¹…åŒ–ï¼ˆå…³é—­é‡å¼€ï¼‰

#### 13. æ£€æŸ¥é”™è¯¯å¤„ç†
éªŒè¯å¼‚å¸¸æƒ…å†µå¤„ç†

**æµ‹è¯•é¡¹ï¼š**
- [ ] æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥
- [ ] é€šçŸ¥æƒé™è¢«æ‹’ç»
- [ ] ç½‘ç»œæ–­å¼€ï¼ˆè™½ç„¶æ˜¯ç¦»çº¿åº”ç”¨ï¼‰

---

### ç¬¬å…­éƒ¨åˆ†ï¼šå•†åº—ææ–™

#### 14. æ£€æŸ¥å•†åº—æè¿°
éªŒè¯å•†åº—æäº¤ææ–™æ˜¯å¦å‡†å¤‡å¥½

**æ£€æŸ¥æ–‡ä»¶ï¼š**
```bash
ls -la STORE-DESCRIPTION.md
```

**å¿…éœ€å†…å®¹ï¼š**
- [ ] åº”ç”¨åç§°ï¼ˆä¸­è‹±æ–‡ï¼‰
- [ ] è¯¦ç»†æè¿°
- [ ] å…³é”®è¯
- [ ] æˆªå›¾ï¼ˆ2-4å¼ ï¼‰
- [ ] éšç§æ”¿ç­– URL

#### 15. æ£€æŸ¥ç‰ˆæœ¬ä¿¡æ¯
éªŒè¯ç‰ˆæœ¬å·å’Œ Build å·

**æ£€æŸ¥å‘½ä»¤ï¼š**
```bash
cat app.json | grep version
cat package.json | grep version
```

**æ ‡å‡†ï¼š**
- âœ… ç‰ˆæœ¬å·æ ¼å¼æ­£ç¡®ï¼ˆ1.0.0ï¼‰
- âœ… app.json å’Œ package.json ä¸€è‡´

---

## æ‰§è¡Œæ­¥éª¤

### 1. è¿è¡Œè‡ªåŠ¨æ£€æŸ¥

```bash
# ä»£ç æ¸…ç†æ£€æŸ¥
echo "=== æ£€æŸ¥ console.log ==="
grep -rn "console\\.log" app/ components/ lib/ store/ --include="*.ts" --include="*.tsx" || echo "âœ… é€šè¿‡"

echo "\n=== æ£€æŸ¥ TODO ==="
grep -rn "TODO\|FIXME" app/ components/ lib/ store/ --include="*.ts" --include="*.tsx" || echo "âœ… é€šè¿‡"

echo "\n=== æ£€æŸ¥å®‰å…¨æ¼æ´ ==="
npm audit

echo "\n=== æ£€æŸ¥ TypeScript ==="
npx tsc --noEmit

echo "\n=== æ£€æŸ¥å›¾æ ‡ ==="
ls -lh assets/images/icon.png assets/images/splash-icon.png

echo "\n=== æ£€æŸ¥é…ç½® ==="
cat eas.json
```

### 2. æ‰‹åŠ¨æ£€æŸ¥é¡¹

æ‰“å¼€åº”ç”¨ï¼Œé€ä¸€æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½ï¼š
- [ ] è®°å½•æ·»åŠ å’Œåˆ é™¤
- [ ] è®¾ç½®ä¿®æ”¹
- [ ] é€šçŸ¥åŠŸèƒ½
- [ ] ä¸»é¢˜åˆ‡æ¢
- [ ] æ•°æ®æŒä¹…åŒ–

### 3. å‡†å¤‡å•†åº—ææ–™

ç¡®è®¤ä»¥ä¸‹æ–‡ä»¶å‡†å¤‡å®Œæ¯•ï¼š
- [ ] STORE-DESCRIPTION.md
- [ ] åº”ç”¨æˆªå›¾ï¼ˆ2-4å¼ ï¼‰
- [ ] éšç§æ”¿ç­– URL

---

## è¾“å‡ºæ ¼å¼

æ£€æŸ¥å®Œæˆåï¼Œè¾“å‡ºæŠ¥å‘Šï¼š

```
ğŸ¯ ä¸Šæ¶å‰æ£€æŸ¥æŠ¥å‘Š

ä»£ç è´¨é‡ï¼š
âœ… æ—  console.log
âœ… æ— æœªå®Œæˆçš„ TODO
âœ… TypeScript ç¼–è¯‘é€šè¿‡
âš ï¸ å‘ç° 3 ä¸ªè½»å¾®é—®é¢˜ï¼ˆè§ä¸‹æ–¹ï¼‰

é…ç½®éªŒè¯ï¼š
âœ… app.json é…ç½®å®Œæ•´
âœ… eas.json é…ç½®æ­£ç¡®
âœ… ç‰ˆæœ¬å·ï¼š1.0.0

èµ„æºæ–‡ä»¶ï¼š
âœ… å›¾æ ‡å®Œæ•´
âœ… å¯åŠ¨é¡µæ­£å¸¸

éšç§åˆè§„ï¼š
âœ… éšç§æ”¿ç­–å®Œæ•´
âœ… æƒé™æœ€å°åŒ–

å®‰å…¨æ€§ï¼š
âœ… 0 vulnerabilities

é—®é¢˜åˆ—è¡¨ï¼š
1. [è½»å¾®] components/xxx.tsx:23 - æœ‰æ³¨é‡Šçš„è°ƒè¯•ä»£ç 
2. [è½»å¾®] lib/xxx.ts:45 - TODO æ³¨é‡Šæœªå®Œæˆ
3. [å»ºè®®] è€ƒè™‘ä¼˜åŒ–å›¾ç‰‡å¤§å°

æ€»ä½“è¯„åˆ†ï¼š95/100 â­â­â­â­â­
å»ºè®®ï¼šä¿®å¤ä¸Šè¿°è½»å¾®é—®é¢˜åå³å¯æäº¤å•†åº—
```

---

## å¿«é€Ÿå‘½ä»¤

åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š
```bash
# æ–¹å¼ 1: ä½¿ç”¨ skill
/skill pre-release-check

# æ–¹å¼ 2: æ‰‹åŠ¨è¿è¡Œæ‰€æœ‰æ£€æŸ¥
npm run pre-release-check
```

ï¼ˆå¯ä»¥åœ¨ package.json ä¸­æ·»åŠ è¿™ä¸ªè„šæœ¬ï¼‰

---

**ä½¿ç”¨æ–¹æ³•**ï¼šåœ¨å‡†å¤‡æ„å»ºç”Ÿäº§ç‰ˆæœ¬å‰ï¼Œè¿è¡Œ `/skill pre-release-check` å³å¯è‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰æ£€æŸ¥ï¼
